{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Manage Users</title>
  <link rel="stylesheet" href="{% static 'css/manage_users.css' %}">
</head>
<body>
  {% include 'Components/header.html' %}

  <div class="users-container">
    <h2>ðŸ‘¤ Manage All Users</h2>

    {% if messages %}
      <ul class="messages">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <table>
      <thead>
        <tr>
          <th>Username</th>
          <th>Email</th>
          <th>User Type</th>
          <th>Actions</th>
        </tr>
      </thead>
            <tbody>
        {% for user in users %}
            <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>
                <form method="post" style="display: flex; align-items: center; gap: 8px;">
                {% csrf_token %}
                <input type="hidden" name="user_id" value="{{ user.id }}">
                <select name="user_type" class="user-type-select">
                    <option value="buyer" {% if user.user_type == 'buyer' %}selected{% endif %}>Buyer</option>
                    <option value="seller" {% if user.user_type == 'seller' %}selected{% endif %}>Seller</option>
                </select>
                <button type="submit" class="btn save">Save</button>
                </form>
            </td>
            <td>
                <a href="{% url 'delete_user' user.id %}" class="btn delete" onclick="return confirm('Are you sure you want to delete this user?');">Delete</a>
            </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
  </div>

  {% include 'Components/footer.html' %}
</body>
</html>
